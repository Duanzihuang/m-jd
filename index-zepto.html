<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>首页</title>
    <link rel="stylesheet" href="css/base.css">
    <link rel="stylesheet" href="css/index.css">
</head>
<body>
    <div class="jd_layout">
        <!-- 头部搜索 -->
        <header class="jd_header">
            <div class="jd_header_box">
                <a href="" class="icon_logo"></a>
                <!-- 在移动端，调用小键盘的时候，这样的一个结构，可以把enter按钮改变成搜索按钮 -->
                <form action="">
                    <span class="icon_search"></span>
                    <input type="search" placeholder="文字提示">
                </form>
                <a href="" class="login">登录</a>
            </div>
        </header>
        <!-- 轮播图 -->
        <div class="jd_banner">
            <!-- 首尾各加一张图片的目的，是为了滑动的时候实现无缝连接 -->
            <ul class="clearfix">
                <li><a href="#"><img src="images/l8.jpg" alt=""></a></li>
                <li><a href="#"><img src="images/l1.jpg" alt=""></a></li>
                <li><a href="#"><img src="images/l2.jpg" alt=""></a></li>
                <li><a href="#"><img src="images/l3.jpg" alt=""></a></li>
                <li><a href="#"><img src="images/l4.jpg" alt=""></a></li>
                <li><a href="#"><img src="images/l5.jpg" alt=""></a></li>
                <li><a href="#"><img src="images/l6.jpg" alt=""></a></li>
                <li><a href="#"><img src="images/l7.jpg" alt=""></a></li>
                <li><a href="#"><img src="images/l8.jpg" alt=""></a></li>
                <li><a href="#"><img src="images/l1.jpg" alt=""></a></li>
            </ul>
            <!-- 指示器 -->
            <ul>
                <li class="now"></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
            </ul>
        </div>
        <!-- 导航栏 -->
        <nav class="jd_nav">
            <ul class="clearfix">
                <li><a href="#"><img src="images/nav0.png" alt=""><p>分类查询</p></a></li>
                <li><a href="#"><img src="images/nav1.png" alt=""><p>分类查询</p></a></li>
                <li><a href="#"><img src="images/nav2.png" alt=""><p>分类查询</p></a></li>
                <li><a href="#"><img src="images/nav3.png" alt=""><p>分类查询</p></a></li>
                <li><a href="#"><img src="images/nav4.png" alt=""><p>分类查询</p></a></li>
                <li><a href="#"><img src="images/nav5.png" alt=""><p>分类查询</p></a></li>
                <li><a href="#"><img src="images/nav6.png" alt=""><p>分类查询</p></a></li>
                <li><a href="#"><img src="images/nav7.png" alt=""><p>分类查询</p></a></li>
            </ul>
        </nav>
        <!-- 商品主体盒子 -->
        <main class="jd_product">
            <section class="jd_product_box">
                <div class="product_title no_border">
                    <div class="f_left">
                        <span class="sk_icon"></span>
                        <span class="sk_name">掌上秒杀</span>
                        <span class="sk_item">
                            <span>0</span>
                            <span>0</span>
                            <span>:</span>
                            <span>0</span>
                            <span>0</span>
                            <span>:</span>
                            <span>0</span>
                            <span>0</span>
                        </span>
                    </div>
                    <div class="f_right">
                        <a href="#" class="m_r10">更多></a>
                    </div>
                </div>
                <div class="product_content clearfix">
                   <ul class="sk_product clearfix">
                       <li>
                         <a href="#">
                            <img src="images/detail01.jpg" alt="">
                         </a>
                         <p>&yen;10</p>
                         <p>&yen;100</p>
                       </li>
                       <li>
                         <a href="#">
                            <img src="images/detail02.jpg" alt="">
                         </a>
                         <p>&yen;10</p>
                         <p>&yen;100</p>
                       </li>
                       <li>
                         <a href="#">
                            <img src="images/detail01.jpg" alt="">
                         </a>
                         <p>&yen;10</p>
                         <p>&yen;100</p>
                       </li>
                   </ul>
                </div>
            </section>
            <section class="jd_product_box">
                <div class="product_title">
                    <p>京东超市</p>
                </div>
                <div class="product_content clearfix">
                    <a class="w_50 f_left b_right" href="#">
                        <img src="images/cp1.jpg" alt="">
                    </a>
                    <a class="w_50 f_right b_bottom" href="#">
                        <img src="images/cp2.jpg" alt="">
                    </a>
                    <a class="w_50 f_right" href="#">
                        <img src="images/cp3.jpg" alt="">
                    </a>
                </div>
            </section>
            <section class="jd_product_box">
                <div class="product_title">
                    <p>京东超市</p>
                </div>
                <div class="product_content clearfix">
                    <a class="w_50 f_right b_left" href="#">
                        <img src="images/cp4.jpg" alt="">
                    </a>
                    <a class="w_50 f_left b_bottom" href="#">
                        <img src="images/cp5.jpg" alt="">
                    </a>
                    <a class="w_50 f_left" href="#">
                        <img src="images/cp6.jpg" alt="">
                    </a>
                </div>
            </section>
            <section class="jd_product_box">
                <div class="product_title">
                    <p>京东超市</p>
                </div>
                <div class="product_content clearfix">
                    <a class="w_50 f_left b_right" href="#">
                        <img src="images/cp1.jpg" alt="">
                    </a>
                    <a class="w_50 f_right b_bottom" href="#">
                        <img src="images/cp2.jpg" alt="">
                    </a>
                    <a class="w_50 f_right" href="#">
                        <img src="images/cp3.jpg" alt="">
                    </a>
                </div>
            </section>
        </main>
    </div>
    <!-- 导入zepto相关的问题 -->
    <!-- 核心文件，包含core、ajxa、form、event、ie 等模块 -->
    <script src="js/zepto/zepto.min.js"></script>
    <!-- 导入额外支持的选择器 selector 比如支持eq等选择器 -->
    <script src="js/zepto/selector.js"></script>
    <!-- zepto中要支持动画，需要导入fx模块 -->
    <script src="js/zepto/fx.js"></script>
    <!-- zepto中如果要用到手势，需要导入touch.js -->
    <script src="js/zepto/touch.js"></script>

    <script>
        $(function(){
            var $banner = $(".jd_banner")
            // 获取宽度
            var width = $banner.width()
            // 获取图片盒子 还支持c3中的选择器，比如 $banner.find('ul:first-child')
            var $imgBox = $banner.find('ul:eq(0)')

            // 点盒子 还支持c3中的选择器，比如 $banner.find('ul:nth-child(2)')
            var $pointBox = $banner.find('ul:eq(1)')
            // 点盒子中的所有li
            var $lis = $pointBox.find('li')
            // 当前显示的索引
            var index = 0

            // 动画定位
            var animateFunc = (callback) => {
                $imgBox.animate({'transform':`translateX(${-index * width}px)`},200,'ease',function(){
                    if (index >= 9){
                        index = 1
                    } else if(index <= 1){
                        index = 8
                    }

                    // 通过c3的方式设置定位，不带动画
                    $imgBox.css('transform',`translateX(${-index * width}px)`)

                    // 滚动结束
                    callback && callback()
                })
            }

            // 点的位置设置正确
            var setActivePoint = function(){
                $lis.forEach((li,i) => {
                    $(li).removeClass('now')
                })

                var currentLi = $lis[index-1]
                $(currentLi).addClass('now')
            }

            // 实现自动滚动
            var timer = setInterval(function(){
                index ++
                animateFunc(function(){
                    setActivePoint()
                })
            },3000)

            // 手势滑动
            $imgBox.on('swipeLeft',function(){
                clearInterval(timer)
                index++
                setActivePoint()
                
                animateFunc(function(){
                    clearInterval(timer)
                    timer = setInterval(function(){
                        index ++
                        animateFunc()
                    },3000)
                })
            })

            $imgBox.on('swipeRight',function(){
                clearInterval(timer)
                index--
                setActivePoint()
                
                animateFunc(function(){
                    clearInterval(timer)
                    timer = setInterval(function(){
                        index ++
                        animateFunc()
                    },3000)
                })
            })
        })
    </script>
</body>
</html>